---
name: dev_workflow
description: |
  Issue å˜ä½ã®é–‹ç™ºãƒ•ãƒ­ãƒ¼ï¼ˆè¦æœ›â†’ãƒ“ã‚¸ãƒã‚¹è¦ä»¶â†’ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶â†’è©³ç´°è¨­è¨ˆâ†’å®Ÿè£…â†’ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼â†’ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰ã‚’ç®¡ç†ã™ã‚‹ã€‚
  ä½¿ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°: (1) æ–°è¦è¦æœ›ã‚’ issue_xxx ã¨ã—ã¦é–‹å§‹ã™ã‚‹ã¨ãã€(2) æ‰¿èªå¾…ã¡ã® Issue ã‚’é€²ã‚ã‚‹ã¨ãã€(3) ã€Œæ‰¿èªã€ã€Œå·®ã—æˆ»ã—ã€ã¨ç™ºè¨€ã—ãŸã¨ãã€(4) issues/ ã®çŠ¶æ…‹ç¢ºèªã‚„ãƒ•ã‚§ãƒ¼ã‚ºã«å¿œã˜ãŸæˆæœç‰©ä½œæˆãƒ»PR ä½œæˆã‚’è¡Œã†ã¨ãã€‚
---

**ãƒ•ã‚§ãƒ¼ã‚ºä¸€è¦§ãƒ»æ‰¿èªãƒ»å·®ã—æˆ»ã—ãƒ»é€šçŸ¥ãƒ«ãƒ¼ãƒ«ã¯ `references/flow.md` ã‚’å‚ç…§ã™ã‚‹**

## æ¦‚è¦

- Issue å˜ä½ã§ `issues/issue_xxx/` ã«æˆæœç‰©ã‚’è“„ç©ã™ã‚‹
- å„ãƒ•ã‚§ãƒ¼ã‚ºã§æˆæœç‰©ã‚’å‡ºåŠ› â†’ ntfy ã§é€šçŸ¥ â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰¿èª â†’ æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã¸é€²ã‚€
- PR ã¯ãƒ•ã‚§ãƒ¼ã‚º 6ï¼ˆcode_reviewï¼‰ã®ã¿ä½œæˆã™ã‚‹

## èµ·å‹•æ™‚ã«ã‚„ã‚‹ã“ã¨

1. `config/projects.yaml` ã® `projects` ã‚’èª­ã¿ã€å„ Issue ã® `request.yaml` ã® `project_ids` ã¨ä¸€è‡´ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® pathã€default_branch ã‚’æŠŠæ¡ã™ã‚‹
2. `issues/` ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã€å„ `phase.yaml` ã§é€²è¡Œä¸­ãƒ»æ‰¿èªå¾…ã¡ã® Issue ã‚’æŠŠæ¡ã™ã‚‹
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§æŒ‡å®šãŒã‚ã‚Œã°ãã® Issueã€ãªã‘ã‚Œã°æ‰¿èªå¾…ã¡ãŒ 1 ä»¶ãªã‚‰ãã® Issueã€è¤‡æ•°ãªã‚‰ä¸€è¦§ã‚’å‡ºã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é¸ã‚“ã§ã‚‚ã‚‰ã†
4. å¯¾è±¡ Issue ã® `request.yaml` ã¨ `phase.yaml` ã‚’èª­ã¿ã€è¦æœ›ã¨ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚ºã‚’æŠŠæ¡ã™ã‚‹
5. ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚ºã«å¿œã˜ãŸä½œæ¥­ã‚’å®Ÿæ–½ã™ã‚‹ï¼ˆãƒ•ã‚§ãƒ¼ã‚ºä¸€è¦§ã¯ flow.mdï¼‰

## å„ãƒ•ã‚§ãƒ¼ã‚ºã®ä½œæ¥­

### ãƒ•ã‚§ãƒ¼ã‚º 1: request

1. æ–°è¦ Issue ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã™ã‚‹: `issues/issue_XXX/`
2. `assets/request.yaml` ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ `request.yaml` ã‚’ä½œæˆã™ã‚‹
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦æœ›ã‚’ `raw_input` ã«è¨˜éŒ²ã™ã‚‹
4. `assets/phase.yaml` ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ `phase.yaml` ã‚’ä½œæˆã™ã‚‹ï¼ˆcurrent_phase: 1, ãƒ•ã‚§ãƒ¼ã‚º 1 ã‚’ completed ã«ï¼‰
5. ãƒ•ã‚§ãƒ¼ã‚º 2 ã¸é€²ã‚€

### ãƒ•ã‚§ãƒ¼ã‚º 2: business_requirements

1. `assets/business-requirements.md` ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æˆæœç‰©ã‚’ä½œæˆã™ã‚‹
2. `phase.yaml` ã‚’æ›´æ–°ã™ã‚‹: `current_phase: 2`, `waiting_approval: true`, `status: in_progress`
3. ntfy ã§é€šçŸ¥ã™ã‚‹: `bash scripts/ntfy.sh "ğŸ“‹ ãƒ“ã‚¸ãƒã‚¹è¦ä»¶ã‚’æ›¸ãã¾ã—ãŸã€‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ãŠé¡˜ã„ã—ã¾ã™"`
4. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‰¿èªã‚’å¾…ã¤**
5. æ‰¿èªã•ã‚ŒãŸã‚‰: `phase.yaml` ã‚’æ›´æ–°ã—ï¼ˆ`waiting_approval: false`, `status: completed`ï¼‰ã€æ¬¡ã¸é€²ã‚€
6. å·®ã—æˆ»ã•ã‚ŒãŸã‚‰: `rejection_reason` ã‚’è¨˜éŒ²ã—ã€ä¿®æ­£å¾Œã«å†åº¦é€šçŸ¥ã™ã‚‹

### ãƒ•ã‚§ãƒ¼ã‚º 3: system_requirements

1. `assets/system-requirements.md` ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æˆæœç‰©ã‚’ä½œæˆã™ã‚‹
2. `phase.yaml` ã‚’æ›´æ–°ã™ã‚‹: `current_phase: 3`, `waiting_approval: true`, `status: in_progress`
3. ntfy ã§é€šçŸ¥ã™ã‚‹: `bash scripts/ntfy.sh "ğŸ“‹ ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶ã‚’æ›¸ãã¾ã—ãŸã€‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ãŠé¡˜ã„ã—ã¾ã™"`
4. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‰¿èªã‚’å¾…ã¤**
5. æ‰¿èªã•ã‚ŒãŸã‚‰: `phase.yaml` ã‚’æ›´æ–°ã—ï¼ˆ`waiting_approval: false`, `status: completed`ï¼‰ã€æ¬¡ã¸é€²ã‚€
6. å·®ã—æˆ»ã•ã‚ŒãŸã‚‰: `rejection_reason` ã‚’è¨˜éŒ²ã—ã€ä¿®æ­£å¾Œã«å†åº¦é€šçŸ¥ã™ã‚‹

### ãƒ•ã‚§ãƒ¼ã‚º 4: detailed_design

1. `assets/detailed-design.md` ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æˆæœç‰©ã‚’ä½œæˆã™ã‚‹
2. `phase.yaml` ã‚’æ›´æ–°ã™ã‚‹: `current_phase: 4`, `waiting_approval: true`, `status: in_progress`
3. ntfy ã§é€šçŸ¥ã™ã‚‹: `bash scripts/ntfy.sh "ğŸ“‹ è©³ç´°è¨­è¨ˆã‚’æ›¸ãã¾ã—ãŸã€‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ãŠé¡˜ã„ã—ã¾ã™"`
4. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ‰¿èªã‚’å¾…ã¤**
5. æ‰¿èªã•ã‚ŒãŸã‚‰: `phase.yaml` ã‚’æ›´æ–°ã—ï¼ˆ`waiting_approval: false`, `status: completed`ï¼‰ã€æ¬¡ã¸é€²ã‚€
6. å·®ã—æˆ»ã•ã‚ŒãŸã‚‰: `rejection_reason` ã‚’è¨˜éŒ²ã—ã€ä¿®æ­£å¾Œã«å†åº¦é€šçŸ¥ã™ã‚‹

### ãƒ•ã‚§ãƒ¼ã‚º 5: development

1. `phase.yaml` ã‚’æ›´æ–°ã™ã‚‹: `current_phase: 5`, `status: in_progress`
2. å¯¾è±¡ Issue ã® `request.yaml` ã® `project_ids` ã«å¯¾å¿œã™ã‚‹**ã™ã¹ã¦ã®**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® `path` ã§å®Ÿè£…ã™ã‚‹
3. å„ãƒªãƒã‚¸ãƒˆãƒªã§ãƒ­ãƒ¼ã‚«ãƒ«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ï¼ˆPR ã¯ã¾ã ä½œã‚‰ãªã„ï¼‰
4. å®Ÿè£…å®Œäº†ã—ãŸã‚‰ãƒ•ã‚§ãƒ¼ã‚º 6 ã¸é€²ã‚€

### ãƒ•ã‚§ãƒ¼ã‚º 6: code_review

1. `project_ids` ã®å„ãƒªãƒã‚¸ãƒˆãƒªã§ PR ã‚’ä½œæˆã™ã‚‹
2. `phase.yaml` ã‚’æ›´æ–°ã™ã‚‹: `pr_urls` ã«å„ãƒªãƒã‚¸ãƒˆãƒªã® PR URL ã‚’è¨˜éŒ²ã™ã‚‹ï¼ˆproject_ids ã®é †ï¼‰
3. ntfy ã§é€šçŸ¥ã™ã‚‹: å„ PR URL ã‚’ `bash scripts/ntfy.sh "ğŸ“‹ MR ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼: [PR URL]"` ã§é€šçŸ¥ã™ã‚‹
4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒãƒ¼ã‚¸ã—ãŸã‚‰å®Œäº†ã¨ã™ã‚‹

### ãƒ•ã‚§ãƒ¼ã‚º 7: deploy

1. GitHub Action ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ï¼ˆé–‹ç™ºå¯¾è±¡ãƒªãƒã‚¸ãƒˆãƒªå´ã®è¨­å®šï¼‰
2. Issue ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã™ã‚‹: `phase.yaml` ã®å…¨ãƒ•ã‚§ãƒ¼ã‚ºã‚’ `completed` ã«ã™ã‚‹

## æ‰¿èªãƒ»å·®ã—æˆ»ã—

ç™ºè¨€ã«å¿œã˜ã¦æ‰¿èªã¾ãŸã¯å·®ã—æˆ»ã—ã‚’è¡Œã†ã€‚ç™ºè¨€ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ AI ã®å‹•ä½œã¯ `references/flow.md` ã®ã€Œæ‰¿èªãƒ«ãƒ¼ãƒ«ã€ã€Œå·®ã—æˆ»ã—ãƒ«ãƒ¼ãƒ«ã€ã«å¾“ã†

## Issue ç•ªå·ã®æ¡ç•ª

`issues/` é…ä¸‹ã®æ—¢å­˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã€æœ€å¤§ç•ªå· + 1 ã‚’ä½¿ç”¨ã™ã‚‹

```bash
# ä¾‹: issue_001, issue_002 ãŒã‚ã‚‹å ´åˆ â†’ issue_003
ls -d issues/issue_* 2>/dev/null | sort -V | tail -1
```

## æˆæœç‰©ã²ãªå½¢ï¼ˆassets/ï¼‰

æˆæœç‰©ã®ã²ãªå½¢ã¯ `assets/` ã«æ ¼ç´ã™ã‚‹

- `request.yaml`: è¦æœ›è¨˜éŒ²ç”¨
- `phase.yaml`: ãƒ•ã‚§ãƒ¼ã‚ºç®¡ç†ç”¨
- `business-requirements.md`: ãƒ“ã‚¸ãƒã‚¹è¦ä»¶
- `system-requirements.md`: ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶
- `detailed-design.md`: è©³ç´°è¨­è¨ˆ

## é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

- `config/projects.yaml`: é–‹ç™ºå¯¾è±¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§
- `config/settings.yaml`: ntfy è¨­å®š
- `scripts/ntfy.sh`: é€šçŸ¥é€ä¿¡ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- **`references/flow.md`**: ãƒ•ã‚§ãƒ¼ã‚ºå®šç¾©ãƒ»æ‰¿èªãƒ»å·®ã—æˆ»ã—ãƒ»é€šçŸ¥ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®ã®è©³ç´°
